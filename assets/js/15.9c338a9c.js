(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{417:function(t,s,a){"use strict";a.r(s);var n=a(27),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"mongodb-学习笔记"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mongodb-学习笔记"}},[t._v("#")]),t._v(" MongoDB 学习笔记")]),t._v(" "),a("p",[t._v("一种文档型的 "),a("strong",[t._v("NoSQL")]),t._v(" 数据库")]),t._v(" "),a("p",[t._v("是非关系数据库当中功能"),a("strong",[t._v("最丰富，最像关系数据库的")]),t._v("。支持部分SQL语句")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("mongoDB 将数据存储为一个文档，数据结构由键值(key=>value)对组成。存储在"),a("strong",[t._v("BSON")]),t._v("（binary  json ）。字段值可以包含其他文档，数组及文档数组。")])]),t._v(" "),a("li",[a("p",[t._v("为 快速开发Web 应用而设计")])]),t._v(" "),a("li",[a("p",[t._v("极简，灵活")])]),t._v(" "),a("li",[a("p",[t._v("数据模型是面向文档的，")])])]),t._v(" "),a("h2",{attrs:{id:"mongodb"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mongodb"}},[t._v("#")]),t._v(" MongoDB")]),t._v(" "),a("h3",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),a("h4",{attrs:{id:"windows下的安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#windows下的安装"}},[t._v("#")]),t._v(" windows下的安装")]),t._v(" "),a("p",[t._v("下载，安装   https://www.mongodb.com/try/download/community")]),t._v(" "),a("h4",{attrs:{id:"linux下安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#linux下安装"}},[t._v("#")]),t._v(" linux下安装")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("下载tgz文件")])]),t._v(" "),a("li",[a("p",[t._v("通过scp 指令上传到服务器")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("scp")]),t._v("  xxx.tgz admin@121.41.225.12:/usr/local/MongoDB\n")])])])]),t._v(" "),a("li",[a("p",[t._v("解压")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" -zxvf xxx.tgz -C /usr/local/MongoDB\n")])])])]),t._v(" "),a("li",[a("p",[t._v("创建文件夹")]),t._v(" "),a("p",[t._v("创建db文件夹 存放数据库数据，")]),t._v(" "),a("p",[t._v("创建log文件夹，存放输出日志")])]),t._v(" "),a("li",[a("p",[t._v("创建配置文件")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 端口")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("port")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27017")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#数据目录")]),t._v("\ndbpath "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" /usr/local/MongoDB/data/db\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#日志文件")]),t._v("\nlogpath "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" /usr/local/MongoDB/data/log/mongodb.log\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#设置后台运行")]),t._v("\nfork "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#日志输出方式")]),t._v("\nlogappend "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("应用配置并进入数据库")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# bin目录下")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" ./mongod --config ./mongodb.conf\n./mongo 进入数据库前台命令行\nmongo --username admin --password "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15823413506")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#有用户验证的情况下连接数据库")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#--config 缩写成-f")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("配置$PATH（推荐，非必须）")]),t._v(" "),a("p",[t._v("将bin下的可执行文件 添加到 PATH ，这样就可以在"),a("strong",[t._v("任意目录下 使用")]),t._v("bin/下的命令")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PATH")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/local/mongodb4/bin:"),a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$PATH")]),t._v("\n")])])]),a("p",[t._v("这个方法重启后$PATH 的设置就失效了，")]),t._v(" "),a("p",[t._v("还有种永久的方法就是  "),a("strong",[t._v("把bin下的 可执行文件 复制到 /user/local/bin 或者其他 $PATH 下的目录")])])]),t._v(" "),a("li",[a("p",[t._v("设置一个账户，授权使用数据库，更加安全（最好设置，不是必须的步骤）")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("use admin "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#切换到admin")]),t._v("\n\ndb.createUser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("user:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"admin"')]),t._v(",pwd:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"158..."')]),t._v(",roles:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"root"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ndb.auth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'root'")]),t._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'123456'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用 账户登录")]),t._v("\ndb.shutdownServer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#关闭")]),t._v("\n")])])]),a("p",[t._v("conf 配置文件新增  以下字段")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#开启身份验证")]),t._v("\nauth "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n")])])]),a("p",[t._v("验证账户的方式进入数据库")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("mongo "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:27017/admin --username "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"root"')]),t._v(" --password "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"123456"')]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("可能遇到的问题")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("关闭mongod 方法：")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("use admin\ndb.shutdownServer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("mongod自带的问题修复工具")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("mongod --repair\n")])])])])])])]),t._v(" "),a("p",[t._v("非正常关闭mongdb 会在db文件下生成 "),a("strong",[t._v("mongod.lock")]),t._v("文件，必须删除这个 文件，否则后面启动会报错")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("如果要使用navicat 等数据库管理工具远程")]),t._v(" 连接linux的mongodb 要在conf 配置文件 添加以下")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("bind_ip")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v(".0.0 \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#因为bind_ip 默认 是127.0.0.1，只允许本地IP连接mongodb数据库，改成0.0.0.0 允许任何ip 连接")]),t._v("\n")])])])])]),t._v(" "),a("h4",{attrs:{id:"数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据库"}},[t._v("#")]),t._v(" 数据库")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("服务器")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("保存数据")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("mongod")]),t._v("  命令启动服务器")]),t._v(" "),a("p",[t._v("命令行   mongod")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("mongod --dbpath D:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".  --port "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("129")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将D盘某目录设置为数据库目录   指定129为数据库端口")]),t._v("\n")])])]),a("p",[t._v("mongoDB默认 在 "),a("strong",[t._v("27017端口")])])])])]),t._v(" "),a("li",[a("p",[t._v("客户端")]),t._v(" "),a("ul",[a("li",[t._v("用来操作数据库")]),t._v(" "),a("li",[a("strong",[t._v("mongo")]),t._v(" 启动客户端")])])])]),t._v(" "),a("p",[t._v("， 进入一个 mongo shell  ，也是一个ES shell 支持  js代码")]),t._v(" "),a("h3",{attrs:{id:"一-三个重要概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一-三个重要概念"}},[t._v("#")]),t._v(" 一.三个重要概念")]),t._v(" "),a("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://cdn.jsdelivr.net/gh/Galileo01/imgCloud@master/image-20200804154707582.png",alt:"image-20200804154707582"}}),t._v(" "),a("ul",[a("li",[a("p",[t._v("mongoDB 中 数据库和集合  "),a("strong",[t._v("不需要我们手动创建")])]),t._v(" "),a("p",[a("strong",[t._v("创建文档时")]),t._v("，文档所在集合/数据库不存在，"),a("strong",[t._v("会自动创建")])])])]),t._v(" "),a("h3",{attrs:{id:"二-基本指令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二-基本指令"}},[t._v("#")]),t._v(" 二.基本指令")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("show dbs/show databases")]),t._v(" "),a("p",[t._v("列出所有数据库")])]),t._v(" "),a("li",[a("p",[t._v("use databaseName")]),t._v(" "),a("p",[t._v("切换到具体数据库")])]),t._v(" "),a("li",[a("p",[t._v("db")]),t._v(" "),a("p",[t._v("显示当前所在数据库名")])]),t._v(" "),a("li",[a("p",[t._v("show collections")]),t._v(" "),a("p",[t._v("列出当前数据库所有集合")])])]),t._v(" "),a("h3",{attrs:{id:"crud-操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#crud-操作"}},[t._v("#")]),t._v(" CRUD 操作")]),t._v(" "),a("h5",{attrs:{id:"_1-插入，增加-文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-插入，增加-文档"}},[t._v("#")]),t._v(" 1.插入，增加 文档")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("db."),a("collectionName",[t._v(".insert(doc)   向集合插入一个或多个文档")])],1)]),t._v(" "),a("li",[a("p",[t._v("db."),a("collectionName",[t._v(".insertOne(doc)  单个")])],1)]),t._v(" "),a("li",[a("p",[t._v("db."),a("collectionName",[t._v(".insertMany(doc)    插入多个文档，必须传入数组")])],1)])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("db.stus.insert"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("name:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sunwukong"')]),t._v(",age:19"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 此时会创建test 数据库，stus 集合")]),t._v("\ndb.stus.insert"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("name:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sunwukong"')]),t._v(",age:19"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(","),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("name:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"zhubajie"')]),t._v(",age:19"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ndb.stus.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 列出集合 内的文档")]),t._v("\n")])])]),a("p",[t._v("当向集合插入文档时没有指定_id 属性，会自动添加 _ id 属性，作为"),a("strong",[t._v("唯一标识")])]),t._v(" "),a("p",[t._v("自己指定必须确保唯一性，")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("使用 可在shell  用 ObjectId() 命令 生成\n")])])]),a("h5",{attrs:{id:"_2-查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-查询"}},[t._v("#")]),t._v(" 2.  查询")]),t._v(" "),a("p",[t._v("更多查询方式见官方 "),a("a",{attrs:{href:"https://docs.mongodb.com/manual/tutorial/query-documents/",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档"),a("OutboundLink")],1)]),t._v(" "),a("ul",[a("li",[a("p",[t._v("db.stus.find({"),a("key",[t._v("："),a("value",[t._v("})   返回一个数组   "),a("strong",[t._v("可以索引取值 [0]")])])],1)],1),t._v(" "),a("p",[t._v("查询"),a("strong",[t._v("所有")]),t._v("符合条件的 文档，"),a("strong",[t._v("不传参数 返回集合下的所有文档")])]),t._v(" "),a("ul",[a("li",[t._v("find().count()/length() 返回符合条件的个数")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("db.stus.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("age:19"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \ndb.stus.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("obj:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("type:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#多层嵌套")]),t._v("\ndb.stus.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("age:19"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\ndb.stus.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("age:19"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("ul",[a("li",[a("p",[a("strong",[t._v("查询嵌套的域")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("db.inventory.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"obj.type"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#查询 obj 字段下，type 字段为"test"的')]),t._v("\n")])])])])])]),t._v(" "),a("li",[a("p",[t._v("db.stus,findOne({})    返回一个"),a("strong",[t._v("文档对象")])]),t._v(" "),a("p",[t._v("查询第一个符合条件的文档对象")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("db.stus.findOne"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("age:20"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".age\n")])])]),a("h5",{attrs:{id:"使用-query-operator-查询操作符（sql数据库中的where-）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-query-operator-查询操作符（sql数据库中的where-）"}},[t._v("#")]),t._v(" 使用 Query Operator 查询操作符（SQL数据库中的where ）")])])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("等于")]),t._v(" "),a("th",[t._v("{"),a("key",[t._v(":"),a("value",[t._v("}")])],1)],1),t._v(" "),a("th",[t._v('db.col.find({"by":"菜鸟教程"})')])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("小于")]),t._v(" "),a("td",[a("code",[t._v("{<key>:{$lt:<value>}}")])]),t._v(" "),a("td",[a("code",[t._v('db.col.find({"likes":{$lt:50}})')])])]),t._v(" "),a("tr",[a("td",[t._v("小于或等于")]),t._v(" "),a("td",[a("code",[t._v("{<key>:{$lte:<value>}}")])]),t._v(" "),a("td",[t._v('db.col.find({"likes":{$lte:50}})')])]),t._v(" "),a("tr",[a("td",[t._v("大于")]),t._v(" "),a("td",[a("code",[t._v("{<key>:{$gt:<value>}}")])]),t._v(" "),a("td",[a("code",[t._v('db.col.find({"likes":{$gt:50}})')])])]),t._v(" "),a("tr",[a("td",[t._v("大于或等于")]),t._v(" "),a("td",[a("code",[t._v("{<key>:{$gte:<value>}}")])]),t._v(" "),a("td",[a("code",[t._v('db.col.find({"likes":{$gte:50}})')])])]),t._v(" "),a("tr",[a("td",[t._v("不等于")]),t._v(" "),a("td",[a("code",[t._v("{<key>:{$ne:<value>}}")])]),t._v(" "),a("td",[a("code",[t._v('db.col.find({"likes":{$ne:50}})')])])])])]),t._v(" "),a("p",[t._v("find().pretty()  使得查询出来的数据在命令行中更加美观的显示")]),t._v(" "),a("p",[t._v("同时使用多个操作符")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("db.stus.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("age:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$gt")]),t._v(":19,"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$lt")]),t._v(":21"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h5",{attrs:{id:"支持正则表达式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#支持正则表达式"}},[t._v("#")]),t._v(" 支持正则表达式")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("db.col.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("title:/教/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# 查询 title 字段以"教"字开头的文档：')]),t._v("\n\ndb.col.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("title:/^教/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# 查询 titl e字段以"教"字结尾的文档：')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#db.col.find({title:/教$/})")]),t._v("\n")])])]),a("ul",[a("li",[a("p",[t._v("查询数组")]),t._v(" "),a("p",[t._v("使用操作符")]),t._v(" "),a("p",[t._v("{ "),a("array",{attrs:{field:""}},[t._v(": { "),a("operator1",[t._v(": "),a("value1",[t._v(", ... } }")])],1)],1)],1),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("db.inventory.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" tags: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"red"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"blank"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#查询只包含“red”“blank” 的tags 数组,且顺序固定")]),t._v("\ndb.inventory.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" tags: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$all")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"red"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"blank"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#查询 包含red，blank 的，顺序不定")]),t._v("\ndb.inventory.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" tags: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"red"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#对于tags 是一个数组来说，查询包含 red的")]),t._v("\ndb.inventory.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" numbers: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$gt")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("25")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#查询 包含大于25 数字的numbers 所在文档")]),t._v("\n")])])])])]),t._v(" "),a("h5",{attrs:{id:"_3-修改"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-修改"}},[t._v("#")]),t._v(" 3. 修改")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("db.collection."),a("strong",[t._v("update")]),t._v("("),a("filter",[t._v(","),a("update",[t._v(" ,"),a("options",[t._v(" )")])],1)],1)]),t._v(" "),a("p",[t._v("默认会使用新对象"),a("update",[a("strong",[t._v("替换")]),t._v("旧对象，使用操作符$set可解决")])],1),t._v(" "),a("p",[a("strong",[a("update",[t._v(" 形式:")])],1)]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code")])])])]),t._v(" "),a("p",[t._v("{\n"),a("update",{attrs:{operator:""}},[t._v(": { "),a("field1",[t._v(": "),a("value1",[t._v(", ... },\n"),a("update",{attrs:{operator:""}},[t._v(": { "),a("field2",[t._v(": "),a("value2",[t._v(", ... },\n}")])],1)],1)],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("\n\n**默认 只更新第一个匹配的文档**，行为和updateOne 一致\n\n更新多个文档需要传入**options**参数\n\n```shell\ndb.stus.update({age:19},{$set:{height:500}},{multi:true}) # multi 表示 修改多个文档\n")])])]),a("ul",[a("li",[a("p",[t._v("db.collection.updateOne("),a("filter",[t._v(","),a("update",[t._v(" ,"),a("options",[t._v(" )")])],1)],1)])]),t._v(" "),a("li",[a("p",[t._v("db.collection.updateMany("),a("filter",[t._v(","),a("update",[t._v(" ,"),a("options",[t._v("  )")])],1)],1)])]),t._v(" "),a("li",[a("p",[t._v("db.collection.replaceOne("),a("filter",[t._v(","),a("update",[t._v(" ,"),a("options",[t._v("  ) 替换")])],1)],1)])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://docs.mongodb.com/manual/reference/operator/update",target:"_blank",rel:"noopener noreferrer"}},[t._v("修改操作符（ update operators）"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("常用")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("$set")]),t._v(" "),a("p",[t._v("只设置 对应的属性")]),t._v(" "),a("p",[t._v("文档没有的属性就新建")])]),t._v(" "),a("li",[a("p",[t._v("$unset")]),t._v(" "),a("p",[t._v("移除某个属性")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("db.inventory.updateOne"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" item: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"paper"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(",\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$set")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"size.uom"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cm"')]),t._v(", status: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"P"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(","),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#更新 size.uom， status")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$unset")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("adress:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(",  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#移除address 属性")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$currentDate")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" lastModified: "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 当前时间")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("$inc")]),t._v(" "),a("p",[t._v("自增操作符")])])]),t._v(" "),a("p",[t._v("数组更新操作符")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v(" - $push\n\n   数组末尾追加元素\n")])])]),a("ul",[a("li",[a("p",[t._v("$addToSet")]),t._v(" "),a("p",[t._v("追加，同时保证"),a("strong",[t._v("元素不重复")])])])])])]),t._v(" "),a("h5",{attrs:{id:"_4-删除文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-删除文档"}},[t._v("#")]),t._v(" 4.删除文档")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("db.collection.remove("),a("filter",[t._v(" ,"),a("options",[t._v(")")])],1)]),t._v(" "),a("p",[t._v("删除所有 符合条件的文档，")]),t._v(" "),a("p",[t._v("只删除一个使用deleteOne或者 传入options参数   true /{justOne：true}")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("db.collection.remove"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除所有文档，清空集合，但性能较差 不推荐")]),t._v("\ndo.collection.drop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#删除集合 ，推荐")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("db.collection.deleteOne()")])]),t._v(" "),a("li",[a("p",[t._v("db.collection.deleteMany()")])]),t._v(" "),a("li",[a("p",[t._v("db.dropDatabase() 删除数据库")])])]),t._v(" "),a("h3",{attrs:{id:"小知识点1"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小知识点1"}},[t._v("#")]),t._v(" 小知识点1")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 的属性值也可以是一个文档（与JSON一致）")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 这种文档内部的文档叫内嵌文档")]),t._v("\ndb.users.update"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("username:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sunwukong"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(","),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$set")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("hobby:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("cities:  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"beijing"')]),t._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"shanghai"')]),t._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"shenzhen"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" , movies:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sanguo"')]),t._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hero"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果要通过内嵌文档来对文档进行查询，此时属性名   必须使用引号 ")]),t._v("\ndb.users.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hobby.movies'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hero"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# 表示 查询hobby.movies 数组包含"hero" 的文档')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 向tangseng中添加一个新的电影Interstellar")]),t._v("\ndb.users.update"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("username:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tangseng"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(","),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$push")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hobby.movies"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Interstellar"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \ndb.users.update"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("username:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tangseng"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(","),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$addToSet")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hobby.movies"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Interstellar"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Set 元素不重复")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# $each 一次添加多个")]),t._v("\ndb.users.update"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("name:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xiaoming"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(","),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$push")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hobby.movies"')]),t._v(":"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$each")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"11"')]),t._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"12"')]),t._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"13"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# //17.向numbers中插入20000条数据 7.2s")]),t._v("\nfor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("let  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("i")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20000")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i++"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    db.numbers.insert"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("num:i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#执行了20000 次")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 只调用一次")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("let")]),t._v(" arr "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nfor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("let "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("i")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20000")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i++"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    arr.push"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("num:i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\ndb.numbers.insert"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("arr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"小知识点2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小知识点2"}},[t._v("#")]),t._v(" 小知识点2")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 前十条文档")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# limit(limit) ")]),t._v("\ndb.numbers.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".limit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#常用于  分页")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 11-20条")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# skip(<offset>) 跳过offset 的数据")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# skip((pagenum-1)*pagesize).limit(pagesize) ")]),t._v("\ndb.numbers.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".skip"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".limit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# skip 和limit 相对位置交换，结果一致，")]),t._v("\n\nconst "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("num")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" db.numbers.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("num"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 支持ES语法")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   查询 sal 小于1000  或者 sal 大于2500     $or 操作符")]),t._v("\ndb.emp.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$or")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        sal: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$lt")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(", "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        sal: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$gt")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2500")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])])]),a("h3",{attrs:{id:"文档之间的关系"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文档之间的关系"}},[t._v("#")]),t._v(" 文档之间的关系")]),t._v(" "),a("ol",[a("li",[t._v("1对1")])]),t._v(" "),a("ul",[a("li",[t._v("在MongoDB 中 ，通过内嵌文档 体现")])]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[t._v("1对N/N对1")])]),t._v(" "),a("ul",[a("li",[t._v("内嵌文档，数组")]),t._v(" "),a("li",[t._v("在文档属性内使用其他文档的_id")])]),t._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[t._v("N对N")])]),t._v(" "),a("ul",[a("li",[t._v("内嵌文档，数组")]),t._v(" "),a("li",[t._v("在文档属性内使用其他文档的_id 数组")])]),t._v(" "),a("h3",{attrs:{id:"小知识点3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小知识点3"}},[t._v("#")]),t._v(" 小知识点3")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# $or 操作符")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# $or:[{},{},{}]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  查询 sal 小于1000  或则 sal 大于2500")]),t._v("\ndb.emp.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$or")]),t._v(":"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("sal:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$lt")]),t._v(":1000"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(","),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("sal:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$gt")]),t._v(":2500"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查询销售部员工")]),t._v("\nvar depno "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" db.dept.findOne"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    dname: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"销售部"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".deptno\n\ndb.emp.find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    depno\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#33.为所有薪资低于1000的员工增加工资400元")]),t._v("\n\n")])])]),a("h3",{attrs:{id:"sort和投影"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sort和投影"}},[t._v("#")]),t._v(" sort和投影")]),t._v(" "),a("p",[a("strong",[t._v("查询文档时，默认时按照_id升序排序")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("sort( { age : -1 } ) 函数")]),t._v(" "),a("p",[t._v("指定排序规则")]),t._v(" "),a("p",[t._v("1:升序，-1降序")])])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("sort( { age : -1, posts: 1 } ) # 先按照 age 降序排序，age 相同的按照 posts 升序\n")])])]),a("p",[t._v("skip，limit，sort 三者 无论相对位置，最后都是 sort->skpi->limit")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("find 函数 的 投影")]),t._v(" "),a("p",[t._v("fdb.collection.find(query, "),a("strong",[t._v("projection")]),t._v(") ，可以传递第二个参数用来 设置结果的某些字段不显示")])])]),t._v(" "),a("p",[a("field",[t._v(": <1 or true>\t显示\n"),a("field",[t._v(": <0 or false>   不显示")])],1)],1),t._v(" "),a("p",[a("strong",[t._v("_id 默认显示，")])]),t._v(" "),a("h2",{attrs:{id:"mongoose"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mongoose"}},[t._v("#")]),t._v(" Mongoose")]),t._v(" "),a("p",[t._v("​       mongoose 是一个让我们可以通过"),a("strong",[t._v("Node来操作MongoDB的模块。")]),t._v("\n​       Mongoose是一 个"),a("strong",[t._v("对象文档模型( ODM)库")]),t._v("(把文档转换为js 对象，易于操作),它对Node原生的"),a("strong",[t._v("MongoDB模块")]),t._v("进行了进-步的优化封装,并提供了更多的功能。\n​      在大多数情况下,它被用来把结构化的模式应用到一一个MongoDB集合,"),a("strong",[t._v("并提供了验证和类型转换")]),t._v("等好处")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("优点")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("可以为文档创建一个"),a("strong",[t._v("模式结构（Schema）")]),t._v("/或者叫做一种类似于SQL 数据库的约束")])]),t._v(" "),a("li",[a("p",[t._v("可以对模型中的对象/文档进行"),a("strong",[t._v("验证")])])]),t._v(" "),a("li",[a("p",[t._v("数据可以通过类型转换转换为对象模型")])]),t._v(" "),a("li",[a("p",[t._v("可以使用"),a("strong",[t._v("中间件")]),t._v("来应用业务逻辑挂钩")])]),t._v(" "),a("li",[a("p",[t._v("比Node原生的MongoDB驱动更容易")])])])]),t._v(" "),a("li",[a("p",[t._v("mongoose中为我们提供了几个新的对象")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("Schema")]),t._v("(模式对象)")])]),t._v(" "),a("p",[t._v("​       Schema对象定义约束了数据库中的文档结构")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("Model")]),t._v(" （对应MongoDB的 集合"),a("strong",[t._v("collections")]),t._v("）")])]),t._v(" "),a("p",[t._v("​       Model对象作为集合中的所有文档的表示，"),a("strong",[t._v("相当于 MongoDB数据库中的集合collection")])]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("Document")])])]),t._v(" "),a("p",[t._v("​      Document表示集合中的具体"),a("strong",[t._v("文档")]),t._v("，相当于集合中 的一个"),a("strong",[t._v("具体的文档")])])])]),t._v(" "),a("p",[t._v("创建顺序   ："),a("strong",[t._v("Schema")]),t._v("- >"),a("strong",[t._v("Model")]),t._v("->"),a("strong",[t._v("Document")])]),t._v(" "),a("h3",{attrs:{id:"使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[t._v("#")]),t._v(" 使用")]),t._v(" "),a("h4",{attrs:{id:"安装-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-2"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),a("h4",{attrs:{id:"引入"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#引入"}},[t._v("#")]),t._v(" 引入")]),t._v(" "),a("h4",{attrs:{id:"连接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#连接"}},[t._v("#")]),t._v(" 连接")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("mongoose.connect 方法")])])]),t._v(" "),a("p",[t._v("mongoose.connect('"),a("strong",[t._v("mongodb")]),t._v("😕/ip:端口/数据库名')")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("mongoose"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mongodb://localhost:27017/test'")]),t._v("，"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useUnifiedTopology"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("useNewUrlParser"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//注：如果linux/windows的mongodb 设置了用户验证，需要在连接时输入用户名密码")]),t._v("\nmongoose"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mongodb://username:pass@127.0.0.1/crud?authSource=admin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useUnifiedTopology"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("useNewUrlParser"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//authSource=admin 参数规定 用于验证的用户来自 admin 数据库")]),t._v("\n")])])]),a("p",[t._v("经测试，可以连接远程的 mongodb 数据库，前提是 相应的端口开放")]),t._v(" "),a("p",[t._v("端口号若是27017，可省")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("监听数据库连接状态")]),t._v(" "),a("p",[t._v("mongoose 对象的connection 属性，可以绑定事件")]),t._v(" "),a("p",[t._v("比如，可以通过"),a("strong",[t._v("open")]),t._v("和**close **事件来监控连接 的打开和关闭。")])]),t._v(" "),a("li",[a("p",[t._v("断开连接")]),t._v(" "),a("p",[t._v("mongoose.disconnect() 一般不使用")])]),t._v(" "),a("li",[a("p",[t._v("操作数据库")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("创建 "),a("strong",[t._v("模式对象 Schema")]),t._v("  ,修饰文档结构")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" stuSchema"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("mongoose"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Schema")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    age"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("Number"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    address"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    gender"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("Number"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("创建Model  对象（"),a("em",[t._v("创建集合")]),t._v("）或者 Document 对象")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//mongoose.model(modelName, schema)  ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//modelName =集合名  ，会被转换为复数")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" StuModel"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mongoose"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("model")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'studs'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("stuSchema"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//返回一个构造函数")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("操作")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//创建并插入文档")]),t._v("\nStuModel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"baikujing"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        age"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'100'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'插入成功'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])])])]),t._v(" "),a("p",[t._v("mongoose 所有api 方法都返回 promise")]),t._v(" "),a("h3",{attrs:{id:"schema"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#schema"}},[t._v("#")]),t._v(" Schema")]),t._v(" "),a("p",[t._v("MongoBD 本身很灵活，不需要设计结构")]),t._v(" "),a("p",[t._v("但是"),a("strong",[t._v("还是需要一定程度上")]),t._v(" 的 字段"),a("strong",[t._v("约束")]),t._v("，保证 数据添加的 正确性，")]),t._v(" "),a("p",[t._v("使用"),a("strong",[t._v("Schema")]),t._v(" 模式结构对象，对文档的属性 字段进行描述，约束，  这样mongoose 还可以帮助我们"),a("strong",[t._v("进行验证")]),t._v("和"),a("strong",[t._v("类型转换")])]),t._v(" "),a("h3",{attrs:{id:"model"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#model"}},[t._v("#")]),t._v(" Model")]),t._v(" "),a("p",[t._v("Model 类 对应 集合，通过Model 操作数据库，也就是db."),a("collection",[t._v("操作数据库")])],1),t._v(" "),a("p",[t._v("mongoose.model('studs',stuSchema);方法返回一个 "),a("strong",[t._v("构造函数")]),t._v("，"),a("strong",[t._v("new 构造出的就是 Document 实例")])]),t._v(" "),a("p",[t._v("以下可以称作    "),a("strong",[t._v("Model 类")]),t._v("的 "),a("strong",[t._v("静态方法")]),t._v("，")]),t._v(" "),a("h4",{attrs:{id:"增"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#增"}},[t._v("#")]),t._v(" 增")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Model.create(doc(s),[options],[callback])")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("doc(s):   "),a("strong",[t._v("Array/Object")])])]),t._v(" "),a("li",[a("p",[t._v("options: 传递给 中间件 **save（）**方法的参数")])]),t._v(" "),a("li",[a("p",[t._v("callback：（err,doc(s)）/(错误对象，插入的内容)")])]),t._v(" "),a("li",[a("p",[t._v("return :Promise")]),t._v(" "),a("p",[t._v("mongose 绝大部分方法 返回Promise ，可以使用"),a("strong",[t._v("then")]),t._v(" ，或者 "),a("strong",[t._v("await")])])])])])]),t._v(" "),a("h4",{attrs:{id:"查"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查"}},[t._v("#")]),t._v(" 查")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Model.find(filter ,[projection] ,[options],[callback])")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("filter :查询条件")])]),t._v(" "),a("li",[a("p",[t._v("projection ：投影对象或字段**字符串，**决定结果要显示的字段")])]),t._v(" "),a("li",[a("p",[t._v("options: 查询选项，skip，limit，sort 等")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("callback")]),t._v(" ：（err,docs） "),a("strong",[t._v("docs")]),t._v(" 始终为数组")]),t._v(" "),a("p",[a("strong",[t._v("回调函数必传或者使用then（await ）接收返回数据，否则不会查询")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//projection 参数")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//1. 使用mongodb 的对象形式")]),t._v("\n\nStuModel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("age"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("docs")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("docs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//2. 使用字符串")]),t._v("\nStuModel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("age"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name age -_id'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("docs")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("docs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -_id  不显示_id")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//options 查询选项 参数")]),t._v("\nStuModel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name age -_id'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("skip"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("limit"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("sort"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("age"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("docs")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("docs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用 then 处理 promise")]),t._v("\nStuModel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("age"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("docs")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("docs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])]),t._v(" "),a("p",[t._v("})")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("\n\n\n")])])])]),t._v(" "),a("li",[a("p",[t._v("Model.findOne(filter ,[projection] ,[options],[callback])")]),t._v(" "),a("p",[t._v("查询第一个返祖filter 的"),a("strong",[t._v("文档对象")]),t._v("，")]),t._v(" "),a("p",[t._v("callback： (err,"),a("strong",[t._v("doc")]),t._v(")   doc单个文档对象")]),t._v(" "),a("p",[t._v("doc 是 "),a("strong",[t._v("Model 构造方法 构造出的实例")])])]),t._v(" "),a("li",[a("p",[t._v("Model.findByID(id,[projection] ,[options],[callback])")]),t._v(" "),a("p",[t._v("callback： (err,"),a("strong",[t._v("doc")]),t._v(")    "),a("strong",[t._v("doc单个文档对象")]),t._v("、")])])]),t._v(" "),a("h4",{attrs:{id:"改"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#改"}},[t._v("#")]),t._v(" 改")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Model.update(filter ,doc,[options],[callback])")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("options:  选项，multi 等")])]),t._v(" "),a("li",[a("p",[t._v("callback 😦 error, "),a("strong",[t._v("updateWriteOpResult")]),t._v(")")]),t._v(" "),a("p",[a("strong",[t._v("updateWriteOpResult")]),t._v(":原生 mongoDB 返回的操作结果")]),t._v(" "),a("p",[a("strong",[t._v("回调函数必传或者使用then（await ）接收返回数据，否则不会更新")])])])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("StuModel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zhubajie'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("$"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("age"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("multi"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])])]),a("p",[a("strong",[t._v("updateWriteOpResult")]),t._v("：")]),t._v(" "),a("p",[t._v("属性")]),t._v(" "),a("ul",[a("li",[t._v("n:匹配到的个数")]),t._v(" "),a("li",[t._v("nModified:更改个数")]),t._v(" "),a("li",[t._v("ok:更新是否成功")])])]),t._v(" "),a("li",[a("p",[t._v("Model.updateMany(filter ,doc,[options],[callback])")])]),t._v(" "),a("li",[a("p",[t._v("Model.updateOne(filter ,doc,[options],[callback])")])]),t._v(" "),a("li",[a("p",[t._v("Model.replaceOne(filter ,doc,[options],[callback])")])])]),t._v(" "),a("h4",{attrs:{id:"删"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删"}},[t._v("#")]),t._v(" 删")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Model.remove(filter ,[options],[callback])")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("options")])]),t._v(" "),a("li",[a("p",[t._v("callback")]),t._v(" "),a("p",[a("strong",[t._v("回调函数必传或者使用then（await ）接收返回数据，否则不会更新")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("StuModel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("deleteOne")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"666"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])])]),t._v(" "),a("li",[a("p",[t._v("Model.deleteOne(filter ,[options],[callback])")])]),t._v(" "),a("li",[a("p",[t._v("Model.deleteMany(filter ,[options],[callback])")])])]),t._v(" "),a("h4",{attrs:{id:"其他"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其他"}},[t._v("#")]),t._v(" 其他")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Model.count(filter,[callback])")]),t._v(" "),a("p",[t._v("统计 个数")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 统计所有个数")]),t._v("\nStuModel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("count")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("count")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nStuModel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("countDocuments")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("count")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])]),t._v(" "),a("p",[t._v("将在下一个版本移除，推荐使用countDocuments 方法代替  in v 5.927")]),t._v(" "),a("h3",{attrs:{id:"document"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#document"}},[t._v("#")]),t._v(" Document")]),t._v(" "),a("p",[t._v("Document 是Model 构造的 实例")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//创建 Document 实例")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" stu"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StuModel")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"小米"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        age"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("stu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("​\t\t"),a("strong",[t._v("实例方法")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("doc.save([options],callback)")]),t._v(" "),a("p",[t._v("将文档保存到集合")]),t._v(" "),a("ul",[a("li",[t._v("callback :(err,"),a("strong",[t._v("updateWriteOpResult")]),t._v(")")])])]),t._v(" "),a("li",[a("p",[t._v("doc.update(update,[options],"),a("strong",[t._v("callback")]),t._v(")")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("update")])]),t._v(" "),a("li",[a("p",[t._v("callback : (err)")]),t._v(" "),a("p",[a("strong",[t._v("回调函数必传或者使用then（await ）接收返回数据，否则不会更新")])])])])])]),t._v(" "),a("p",[t._v("将要弃用 ，推荐 document.updateOne/updateMany 代替  in  v 5.927")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建一个 docuemnt 对象")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" stu "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StuModel")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"小米"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        age"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" stu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        StuModel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findOne")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"小米"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" doc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("doc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                 doc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" $"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" age"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("777")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// console.log(res);")]),t._v("\n            \n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//第二种方法")]),t._v("\n                doc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("address "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"武汉小米"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                res "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" doc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// console.log(res);")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//删除")]),t._v("\n                res "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" doc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// console.log(res);")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("ul",[a("li",[a("p",[t._v("doc.remove([callback])")])]),t._v(" "),a("li",[a("p",[t._v("doc.get(feild)")])]),t._v(" "),a("li",[a("p",[t._v("doc.set(feild,value)")])]),t._v(" "),a("li",[a("p",[t._v("doc.toJSON([options])")]),t._v(" "),a("p",[t._v("转换为JSON对象")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://mongoosejs.com/docs/api/document.html#document_Document-toObject",target:"_blank",rel:"noopener noreferrer"}},[t._v("options"),a("OutboundLink")],1),t._v(" 选项参数")])])]),t._v(" "),a("li",[a("p",[t._v("doc.toObject([options])")])])]),t._v(" "),a("p",[t._v("​     返回 "),a("strong",[t._v("js 普通对象")]),t._v("，返回的对象  "),a("strong",[t._v("没有Document 的实例属性和方法")])]),t._v(" "),a("p",[t._v("​        options 和toJSON方法一致")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("doc.id属性")]),t._v(" "),a("p",[t._v("documents._id 的字符串形式，")]),t._v(" "),a("p",[t._v("使用filter 进行查找时，_id可以传入字符串，而，"),a("strong",[t._v("document 之间的比较")]),t._v("   需要使用  .id属性，进行字符串的比较，因为 "),a("strong",[t._v("对象形式")]),t._v("的ObjectId()是一个引用，始终不相等，")])])]),t._v(" "),a("h3",{attrs:{id:"mongoose-的模块化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mongoose-的模块化"}},[t._v("#")]),t._v(" Mongoose 的模块化")]),t._v(" "),a("p",[t._v("抽离模块")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("连接模块")]),t._v(" "),a("p",[t._v("专门用于和数据库进行连接")])]),t._v(" "),a("li",[a("p",[t._v("模型对象模块")]),t._v(" "),a("p",[t._v("抽象出不同的Model 对象，并导出，在路由内调用，操作数据库")])])]),t._v(" "),a("p",[t._v("放置在不同文件夹")])])}),[],!1,null,null,null);s.default=e.exports}}]);